; multi-segment executable file template.

data segment
    ; add your data here!
    CHAR_X DW 14
    CHAR_Y DW 9
    CHAR_SIZE DW 10
ends

stack segment
    dw   128  dup(0)
ends

code segment
start:
   MAIN PROC
; set segment registers:
    mov ax, data
    mov ds, ax
    mov es, ax

    ;add your code here
MOV AH,00H;SET VIDEO MODE
MOV AL,12H;RESOLUTION 320x200
INT 10H

MOV AL,0DH ;MAGENTA
MOV AH,0CH ;WRITE PIXEL

;HORIZONTAL LINES
MOV CX,0
MOV DX,0
INT 10H
H1:
INC CX
INT 10H
CMP CX,100
JB H1

MOV CX,120
INT 10H
H2:
INC CX
INT 10H
CMP CX,300
JB H2

MOV DX,30
MOV CX,20
INT 10H
H3:
INC CX
INT 10H
CMP CX,240
JB H3

MOV CX,260
INT 10H
H4:
INC CX
INT 10H
CMP CX,300
JB H4

MOV DX,60
MOV CX,0
INT 10H
H5:
INC CX
INT 10H
CMP CX,160
JB H5

MOV CX,180
INT 10H
H6:
INC CX
INT 10H
CMP CX,280
JB H6

MOV DX,90
MOV CX,20
INT 10H
H7:
INC CX
INT 10H
CMP CX,260
JB H7

MOV CX,280
INT 10H
H8:
INC CX
INT 10H
CMP CX,300
JB H8

MOV DX,120
MOV CX,0
INT 10H
H9:
INC CX
INT 10H
CMP CX,40
JB H9

MOV CX,60
INT 10H
H10:
INC CX
INT 10H
CMP CX,300
JB H10

MOV DX,150
MOV CX,0
INT 10H
H11:
INC CX
INT 10H
CMP CX,20
JB H11

MOV CX,40
INT 10H
H12:
INC CX
INT 10H
CMP CX,260
JB H12

MOV CX,280
INT 10H
H13:
INC CX
INT 10H
CMP CX,300
JB H13

MOV DX,180
MOV CX,20
INT 10H
H14:
INC CX
INT 10H
CMP CX,220
JB H14

MOV CX,240
INT 10H
H15:
INC CX
INT 10H
CMP CX,300
JB H15

MOV DX,220
MOV CX,0
INT 10H
H16:
INC CX
INT 10H
CMP CX,60
JB H16

MOV CX,80
INT 10H
H17:
INC CX
INT 10H
CMP CX,280
JB H17

MOV DX,260
MOV CX,20
INT 10H
H18:
INC CX
INT 10H
CMP CX,60
JB H18

MOV CX,80
INT 10H
H19:
INC CX
INT 10H
CMP CX,300
JB H19

MOV DX,300
MOV CX,0
INT 10H
H20:
INC CX
INT 10H
CMP CX,260
JB H20

MOV CX,280
INT 10H
H21:
INC CX
INT 10H
CMP CX,300
JB H21

;VERTICAL LINES
MOV DX,0
MOV CX,0
INT 10H
V1:
INC DX
INT 10H
CMP DX,300
JB V1

MOV DX,0
MOV CX,300
INT 10H
V2:
INC DX
INT 10H
CMP DX,300
JB V2

MOV DX,30
MOV CX,120
INT 10H
V3:
INC DX
INT 10H
CMP DX,60
JB V3

MOV DX,60
MOV CX,220
INT 10H
V4:
INC DX
INT 10H
CMP DX,90
JB V4

MOV DX,90
MOV CX,180
INT 10H
V5:
INC DX
INT 10H
CMP DX,120
JB V5

MOV DX,150
MOV CX,120
INT 10H
V6:
INC DX
INT 10H
CMP DX,180
JB V6

MOV DX,180
MOV CX,180
INT 10H
V7:
INC DX
INT 10H
CMP DX,220
JB V7

MOV DX,220
MOV CX,260
INT 10H
V8:
INC DX
INT 10H
CMP DX,260
JB V8

MOV DX,260
MOV CX,20
INT 10H
V9:
INC DX
INT 10H
CMP DX,300
JB V9
CALL DRAW_CHAR

CALL INPUT

ret
      
MAIN ENDP
    DRAW_CHAR PROC
    MOV CX,CHAR_X
    MOV DX,CHAR_Y
    MOV AH,0CH
    MOV AL,0FH
    DRAW:
    INT 10H
    INC CX
    MOV BX,CX
    SUB BX,CHAR_X
    CMP BX,CHAR_SIZE
    JNG DRAW
    MOV CX,CHAR_X
    INC DX
    MOV BX,DX
    SUB BX,CHAR_Y
    CMP BX,CHAR_SIZE
    JNG DRAW
    RET    
    DRAW_CHAR ENDP

;--------------------------------------------------
INPUT PROC
    INP:
        MOV AH,00H
        INT 16H
        CMP AH,48H ;IF ARROW UP IS PRESSSED
        JE UP
        CMP AH,50H ;DOWN KEY
        JE DOWN
        CMP AH,4BH ;LEFT
        JE LEFT
        CMP AH,4DH ;RIGHT
        JE RIGHT
        CMP AL,1BH
        JE ESCAPE
        JMP INP
    RIGHT:
        CALL DELETE_CHAR
        MOV CX,CHAR_X
        ADD CX,10
        MOV CHAR_X,CX
        CALL DRAW_CHAR
        JMP INP
    UP:
        CALL DELETE_CHAR
        SUB CHAR_Y,10
        CALL DRAW_CHAR
        JMP INP
    LEFT:
        CALL DELETE_CHAR
        SUB CHAR_X,10
        CALL DRAW_CHAR
        JMP INP
    DOWN:
        CALL DELETE_CHAR
        ADD CHAR_Y,10
        CALL DRAW_CHAR
        JMP INP
    ESCAPE:
        RET
INPUT ENDP

;-------------------------------------------------
DELETE_CHAR PROC
    MOV CX,CHAR_X
    MOV DX,CHAR_Y
    MOV AH,0CH
    MOV AL,00H
    DELETE:
    INT 10H
    INC CX
    MOV BX,CX
    SUB BX,CHAR_X;make some changes
    CMP BX,CHAR_SIZE
    JNG DRAW
    MOV CX,CHAR_X
    INC DX
    MOV BX,DX
    SUB BX,CHAR_Y
    CMP BX,CHAR_SIZE
    JNG DELETE
    RET
DELETE_CHAR ENDP
        
ends

end start ; set entry point and stop the assembler.
